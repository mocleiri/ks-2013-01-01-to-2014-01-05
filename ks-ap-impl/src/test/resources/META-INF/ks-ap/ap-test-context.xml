<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
          http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<!-- Copy per-module to src/test/resources/META-INF/ks-ap/ap-test-context.xml
		
		This context file is intentionally left blank in ks-ap-framework,
		populate with delivered services for unit testing in other modules.
		
		/mwfyffe 2012-12-16
	-->

    <bean id="theEntityManagerFactory" parent="defaultEntityManagerFactory" autowire-candidate="false" autowire="no">
        <property name="persistenceUnitName" value="LearningPlan"/>
        <property name="persistenceXmlLocation"
                  value="classpath:META-INF/lp-persistence.xml"/>
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="emEntityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
        <property name="entityManagerFactory" ref="theEntityManagerFactory" />
    </bean>

    <bean id="academicPlanService" class="org.kuali.student.ap.academicplan.service.AcademicPlanServiceImpl">
        <property name="learningPlanDao" ref="learningPlanDao"/>
        <property name="planItemDao" ref="planItemDao"/>
    </bean>


    <!--<bean id="typeService" class="org.kuali.student.r2.common.type.service.TypeServiceMockImpl"/>-->

    <!--<bean id="courseHelper" class="org.kuali.student.ap.framework.context.support.DefaultCourseHelper" />-->

    <!--<bean id="termHelper" class="org.kuali.student.ap.framework.context.support.DefaultTermHelper" />-->



    <bean id="learningPlanDao" class="org.kuali.student.ap.academicplan.dao.LearningPlanDao">
        <property name="em" ref="emEntityManager"/>
    </bean>

    <bean id="planItemDao" class="org.kuali.student.ap.academicplan.dao.PlanItemDao">
        <property name="em" ref="emEntityManager"/>
    </bean>

    <!--  Preloaded data -->
    <bean id="dataLoadListenerKsapImpl" class="org.kuali.student.common.util.jpa.LoadSqlListener">
        <property name="jtaTxManager" ref="JtaTxManager"/>
        <property name="shouldLoadData" value="true"/>
        <property name="preloadMap">
            <map>
                <entry key="LearningPlan">
                    <list>
                        <value>classpath:learning_plan.sql</value>
                    </list>
                </entry>
            </map>
        </property>
    </bean>

</beans>