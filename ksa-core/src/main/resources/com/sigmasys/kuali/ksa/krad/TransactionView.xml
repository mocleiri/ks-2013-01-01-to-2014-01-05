<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <bean id="TransactionView" parent="Uif-KsaFormView" p:footer.render="false">
        <property name="title" value="Student Transaction Overview"/>
        <property name="headerText" value="Transaction Overview"/>
        <property name="formClass" value="com.sigmasys.kuali.ksa.krad.form.TransactionForm"/>
        <property name="theme" ref="Uif-KsaTheme"/>
        <property name="entryPageId" value="ViewTransactions"/>
        <property name="navigation" ref="KsaAccountNavigation"/>
        <property name="items">
            <list merge="true">
                <bean parent="Uif-Page" p:id="ViewTransactions" p:title="View Transactions">
                    <!--<property name="headerText" value="View Transactions"/>-->
                    <property name="items">
                        <list>
                            <bean id="viewTransactionAccountInfo" parent="Uif-HorizontalBoxSection">
                                <property name="items">
                                <list>
                                    <bean parent="Uif-HeaderTwo" p:headerText="@{account.compositeDefaultPersonName}"/>
                                    <bean parent="Uif-InputField" p:propertyName="account.id" p:style="margin-top: 15px;" p:readOnly="@{true}"/>
                                    <ref bean="Ksa-TransactionAlerts"/>
                                    <ref bean="Ksa-TransactionFlags"/>

                                </list>
                                </property>
                            </bean>
                            <bean parent="Uif-MessageField" p:messageText="@{statusMessage}"/>
                            <ref bean="transactionDisplay"/>

                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Page" p:id="ViewAlerts" p:title="View Alerts">
                    <property name="items">
                        <list>
                            <bean parent="Uif-HeaderTwo" p:headerText="Alerts"/>
                            <ref bean="alertLightboxTable"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Page" p:id="ViewFlags" p:title="View Flags">
                    <property name="items">
                        <list>
                            <bean parent="Uif-HeaderTwo" p:headerText="Flags"/>
                            <ref bean="flagLightboxTable"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Page" p:id="ViewMemos" p:title="View Memos">
                    <property name="items">
                        <list>
                            <bean parent="Uif-HeaderTwo" p:headerText="Memos"/>
                            <bean parent="Uif-Link" p:linkText="Add a Memo" p:target="_self"
                                  p:href="memoView?methodToCall=get&amp;pageId=AddMemoPage&amp;viewId=MemoView&amp;userId=@{account.id}"/>
                            <ref bean="memoLightboxTable"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean name="transactionDisplay" parent="Uif-VerticalBoxSection">
        <property name="items">
        <list>
            <bean parent="Uif-HorizontalFieldGroup" p:label="Filter Transactions">
                <property name="items">
                    <list>
                        <bean parent="Uif-InputField" p:propertyName="startingDate" p:labelPlacement="LEFT" p:label="From"
                              p:fieldLabel.renderColon="false" p:constraintText="Format: mm/dd/yyyy">
                            <property name="control">
                                <bean parent="Uif-DateControl" p:size="11" p:maxLength="20"/>
                            </property>
                        </bean>
                        <bean parent="Uif-InputField" p:propertyName="endingDate" p:labelPlacement="LEFT" p:label="to"
                              p:fieldLabel.renderColon="false" p:constraintText="Format: mm/dd/yyyy">
                            <property name="control">
                                <bean parent="Uif-DateControl" p:size="11" p:maxLength="20"/>
                            </property>
                        </bean>

                        <bean parent="Uif-SecondaryActionButton-Small"
                              p:methodToCall="get"
                              p:actionLabel="Filter"
                              p:onClickScript="writeHiddenToForm(&quot;userId&quot;, &quot;@{account.id}&quot;);">
                        </bean>
                    </list>
                </property>
            </bean>
            <bean parent="Uif-TabGroup"><property name="items"><list>
                <bean parent="Uif-VerticalBoxSection" p:headerText="Roll-up">
                    <property name="items">
                        <list>
                            <bean id="rollupList" parent="Uif-TableCollectionSection" p:layoutManager.numberOfColumns="7">
                                <property name="title" value="Roll-Up"/>
                                <property name="readOnly" value="true"/>
                                <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.TransactionModel"/>
                                <property name="propertyName" value="rollupTransactions"/>
                                <property name="layoutManager.sequencePropertyName" value="id"/>
                                <property name="layoutManager.richTable.render" value="true"/>
                                <property name="layoutManager.renderSequenceField" value="false"/>
                                <property name="renderAddBlankLineButton" value="false" />
                                <property name="renderAddLine" value="false" />
                                <property name="layoutManager.applyDefaultCellWidths" value="false"/>
                                <property name="layoutManager.richTable.disableTableSort" value="false"/>
                                <property name="layoutManager.richTable.templateOptions">
                                    <map merge="true">
                                        <entry key="bPaginate" value="false"/>
                                        <entry key="bInfo" value="false"/>
                                        <entry key="bFilter" value="false"/>
                                    </map>
                                </property>
                                <property name="layoutManager.columnCalculations">
                                    <list>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="chargeAmount"/>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="paymentAmount"/>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="allocatedLockedAllocated"/>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="unallocatedAmount"/>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-InputField" p:label="Roll-up" p:propertyName="rollup.name" p:width="40%"/>
                                        <bean parent="Uif-InputField" p:propertyName="chargeAmount" p:label="Charges" p:labelPlacement="TOP" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="paymentAmount" p:label="Payments" p:labelPlacement="TOP" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="defermentAmount" p:label="Deferments" p:labelPlacement="TOP" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="allocatedLockedAllocated" p:label="Allocated" p:labelPlacement="TOP" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="unallocatedAmount" p:label="Unallocated" p:labelPlacement="TOP" p:style="text-align: right; width: 10%;"/>
                                    </list>
                                </property>

                                <property name="layoutManager.expandDetailsActionPrototype">
                                    <bean parent="Uif-ExpandDetailsImageAction"/>
                                </property>
                                <property name="layoutManager.rowDetailsGroup">
                                    <ref bean="rollupTransactionList"/>
                                </property>

                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-VerticalBoxSection" p:headerText="Running Balance">
                    <property name="items">
                        <list>
                            <bean parent="Uif-Message" p:messageText="Starting Balance@{!#empty(startingDate) ? ' on ' + startingDate : ''}: &lt;b&gt;@{startingBalance}&lt;/b&gt;" p:style="float: right;"/>

                            <bean parent="Uif-TableCollectionSection" p:layoutManager.numberOfColumns="6">
                                <property name="readOnly" value="true"/>
                                <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.TransactionModel"/>
                                <property name="propertyName" value="allTransactions"/>
                                <property name="layoutManager.sequencePropertyName" value="id"/>
                                <property name="layoutManager.richTable.render" value="true"/>
                                <property name="layoutManager.renderSequenceField" value="false"/>
                                <property name="renderAddBlankLineButton" value="false" />
                                <property name="renderAddLine" value="false" />
                                <property name="layoutManager.applyDefaultCellWidths" value="false"/>
                                <property name="layoutManager.richTable.disableTableSort" value="false"/>
                                <property name="layoutManager.richTable.templateOptions">
                                    <map merge="true">
                                        <entry key="bPaginate" value="false"/>
                                        <entry key="bInfo" value="false"/>
                                        <entry key="bFilter" value="false"/>
                                        <entry key="bSort" value="false" />
                                    </map>
                                </property>
                                <property name="layoutManager.columnCalculations">
                                    <list>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="chargeAmount"/>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="paymentAmount"/>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="allocatedLockedAllocated"/>
                                        <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="unallocatedAmount"/>
                                    </list>
                                </property>

                                <property name="items">
                                    <list>
                                        <bean parent="Uif-InputField" p:propertyName="effectiveDate" p:label="Effective" p:style="width: 10%;"/>
                                        <bean parent="Uif-HorizontalFieldGroup" p:label="Description" p:style="width: 40%;">
                                            <property name="items">
                                                <list>
                                                    <bean parent="Uif-LinkField" p:href="javascript:void(0)" p:onClickScript="showLightboxComponent('transactionDetailLightboxRunningTotal@{#lineSuffix}');" p:linkText="@{#line.transactionType.description} (@{#line.allocations.size()})" />
                                                    <bean id="transactionDetailLightboxRunningTotal" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-HeaderTwo" p:headerText="Transaction Details"/>
                                                                <ref bean="transactionDetail"/>
                                                            </list>
                                                        </property>
                                                    </bean>

                                                    <bean parent="Uif-ImageField" p:source="../images/memo.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                                                          p:onClickScript="showLightboxComponent('memoLightboxRunningTotal@{#lineSuffix}');" p:render="@{#line.memos.size() > 0}">
                                                        <property name="toolTip">
                                                            <bean parent="Uif-Tooltip" p:tooltipContent="Memo: (@{#line.memos.size()}) Click icon to view"/>
                                                        </property>
                                                    </bean>
                                                    <bean id="memoLightboxRunningTotal" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-HeaderTwo" p:headerText="Account and Transaction Memos"/>
                                                                <ref bean="memoLightboxTable"/>

                                                            </list>
                                                        </property>
                                                    </bean>

                                                    <bean parent="Uif-ImageField" p:source="../images/document.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                                                          p:onClickScript="showLightboxComponent('documentLightboxRunningTotal@{#lineSuffix}');">
                                                        <property name="toolTip">
                                                            <bean parent="Uif-Tooltip" p:tooltipContent="Document: Click icon to view"/>
                                                        </property>
                                                    </bean>
                                                    <bean id="documentLightboxRunningTotal" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-Image" p:source="../images/sample-document.png"/>

                                                            </list>
                                                        </property>
                                                    </bean>

                                                    <bean parent="Uif-ImageField" p:source="../images/tag.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                                                          p:onClickScript="showLightboxComponent('tagLightboxRunningTotal@{#lineSuffix}');" p:render="@{#line.tags.size() > 0}">
                                                        <property name="toolTip">
                                                            <bean parent="Uif-Tooltip" p:tooltipContent="Tags: @{#line.tagList}"/>
                                                        </property>
                                                    </bean>
                                                    <bean id="tagLightboxRunningTotal" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-HeaderTwo" p:headerText="Account and Transaction Tags"/>
                                                                <ref bean="tagGroup"/>

                                                            </list>
                                                        </property>
                                                    </bean>



                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="Uif-InputField" p:propertyName="chargeAmount" p:label="Charges" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="paymentAmount" p:label="Payments" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="allocatedLockedAllocated" p:label="Allocated" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="unallocatedAmount" p:label="Unallocated" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="runningBalance" p:label="Balance" p:style="text-align: right; width: 10%;"/>

                                    </list>
                                </property>
                                <property name="layoutManager.expandDetailsActionPrototype">
                                    <bean parent="Uif-ExpandDetailsImageAction" p:render="@{#line.allocations.size() > 0}"/>
                                </property>
                                <property name="layoutManager.rowDetailsGroup">
                                    <ref bean="runningAllocationList"/>
                                </property>
                            </bean>

                            <bean parent="Uif-Message" p:messageText="No Deferments" p:render="@{deferments.size() == 0}"/>
                            <bean parent="Uif-TableCollectionSection" p:layoutManager.numberOfColumns="7">
                                <property name="readOnly" value="true"/>
                                <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.TransactionModel"/>
                                <property name="propertyName" value="deferments"/>
                                <property name="layoutManager.sequencePropertyName" value="id"/>
                                <property name="layoutManager.richTable.render" value="true"/>
                                <property name="layoutManager.renderSequenceField" value="false"/>
                                <property name="renderAddBlankLineButton" value="false" />
                                <property name="renderAddLine" value="false" />
                                <property name="layoutManager.applyDefaultCellWidths" value="false"/>
                                <property name="layoutManager.richTable.disableTableSort" value="false"/>
                                <property name="layoutManager.richTable.templateOptions">
                                    <map merge="true">
                                        <entry key="bPaginate" value="false"/>
                                        <entry key="bInfo" value="false"/>
                                        <entry key="bFilter" value="false"/>
                                        <entry key="bSort" value="false" />
                                    </map>
                                </property>

                                <property name="items">
                                    <list>
                                        <bean parent="Uif-InputField" p:propertyName="effectiveDate" p:label="Effective" p:style="width: 10%;"/>
                                        <bean parent="Uif-HorizontalFieldGroup" p:label="Description" p:style="width: 40%;">
                                            <property name="items">
                                                <list>
                                                    <bean parent="Uif-LinkField" p:href="javascript:void(0)" p:onClickScript="showLightboxComponent('transactionDetailLightboxRunningTotalDeferment@{#lineSuffix}');" p:linkText="@{#line.transactionType.description} (@{#line.allocations.size()})" />
                                                    <bean id="transactionDetailLightboxRunningTotalDeferment" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-HeaderTwo" p:headerText="Transaction Details"/>
                                                                <ref bean="transactionDetail"/>
                                                            </list>
                                                        </property>
                                                    </bean>

                                                    <bean parent="Uif-ImageField" p:source="../images/memo.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                                                          p:onClickScript="showLightboxComponent('memoLightboxRunningTotalDeferment@{#lineSuffix}');" p:render="@{#line.memos.size() > 0}">
                                                        <property name="toolTip">
                                                            <bean parent="Uif-Tooltip" p:tooltipContent="Memo: (@{#line.memos.size()}) Click icon to view"/>
                                                        </property>
                                                    </bean>
                                                    <bean id="memoLightboxRunningTotalDeferment" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-HeaderTwo" p:headerText="Account and Transaction Memos"/>
                                                                <ref bean="memoLightboxTable"/>

                                                            </list>
                                                        </property>
                                                    </bean>

                                                    <bean parent="Uif-ImageField" p:source="../images/document.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                                                          p:onClickScript="showLightboxComponent('documentLightboxRunningTotalDeferment@{#lineSuffix}');">
                                                        <property name="toolTip">
                                                            <bean parent="Uif-Tooltip" p:tooltipContent="Document: Click icon to view"/>
                                                        </property>
                                                    </bean>
                                                    <bean id="documentLightboxRunningTotalDeferment" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-Image" p:source="../images/sample-document.png"/>

                                                            </list>
                                                        </property>
                                                    </bean>

                                                    <bean parent="Uif-ImageField" p:source="../images/tag.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                                                          p:onClickScript="showLightboxComponent('tagLightboxRunningTotalDeferment@{#lineSuffix}');" p:render="@{#line.tags.size() > 0}">
                                                        <property name="toolTip">
                                                            <bean parent="Uif-Tooltip" p:tooltipContent="Tags: @{#line.tagList}"/>
                                                        </property>
                                                    </bean>
                                                    <bean id="tagLightboxRunningTotalDeferment" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                                                        <property name="hidden" value="true"/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="Uif-HeaderTwo" p:headerText="Account and Transaction Tags"/>
                                                                <ref bean="tagGroup"/>

                                                            </list>
                                                        </property>
                                                    </bean>



                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="Uif-InputField" p:propertyName="defermentAmount" p:label="Charges" p:style="text-align: right; width: 10%;"/>
                                        <bean parent="Uif-InputField" p:propertyName="runningBalance" p:label="Balance" p:style="text-align: right; width: 10%;"/>

                                    </list>
                                </property>

                            </bean>

                        </list>
                    </property>
                </bean>


            </list></property></bean>
        </list>
        </property>


    </bean>

    <!--
    <bean id="" parent="Uif-CollectionGroupBase" p:title="Transactions" p:propertyName="subTransactions"
          p:collectionObjectClass="com.sigmasys.kuali.ksa.krad.model.TransactionModel">
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="id"/>
            </list>
        </property>
    </bean>
    -->

    <bean id="rollupTransactionList" parent="Uif-TableSubCollection-WithinSection" p:layoutManager.numberOfColumns="7">
        <property name="headerText" value="Transactions" />
        <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.TransactionModel" />
        <property name="propertyName" value="subTransactions" />
        <property name="layoutManager.sequencePropertyName" value="id" />
        <property name="layoutManager.richTable.render" value="true" />
        <property name="layoutManager.renderSequenceField" value="false"/>
        <property name="style" value="width: 100%;"/>
        <!--<property name="style" value="background: #CCC;"/>-->
        <!--<property name="disclosure.collapseImageSrc" value="../images/alert.png"/>-->
        <!--<property name="layoutManager.columnCalculations">
            <list>
                <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="unallocatedAmount"/>
            </list>
        </property>-->
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <entry key="bPaginate" value="false"/>
                <entry key="bInfo" value="false"/>
                <entry key="bFilter" value="false"/>
            </map>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="effectiveDate" p:label="Effective" p:style="width: 10%;"/>
                <bean parent="Uif-HorizontalFieldGroup" p:label="Description" p:style="width: 40%;">
                    <property name="items">
                    <list>
                        <!-- TJB
                        <bean parent="Uif-LinkField" p:href="javascript:void(0)" p:onClickScript="showLightboxComponent('transactionDetailLightbox@{#lineSuffix}');" p:linkText="@{#line.transactionType.description}" />
                        TJB -->
                        <bean parent="Uif-LinkField" p:href="javascript:void(0)" p:onClickScript="showLightboxComponent('transactionDetailLightbox@{#lineSuffix}');" p:linkText="@{#line.transactionType.description}" />
                        <bean id="transactionDetailLightbox" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                            <property name="hidden" value="true"/>
                            <property name="items">
                                <list>
                                    <bean parent="Uif-HeaderTwo" p:headerText="Transaction Details"/>
                                    <ref bean="transactionDetail"/>
                                </list>
                            </property>
                        </bean>
                        <bean parent="Uif-ImageField" p:source="../images/memo.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                              p:onClickScript="showLightboxComponent('memoLightbox@{#lineSuffix}');" p:render="@{#line.memos.size() > 0}">
                            <property name="toolTip">
                                <bean parent="Uif-Tooltip" p:tooltipContent="Memo: (@{#line.memos.size()}) Click icon to view"/>
                            </property>
                        </bean>
                        <bean id="memoLightbox" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                            <property name="hidden" value="true"/>
                            <property name="items">
                                <list>
                                    <bean parent="Uif-HeaderTwo" p:headerText="Account and Transaction Memos"/>
                                    <ref bean="memoLightboxTable"/>

                                </list>
                            </property>
                        </bean>

                        <bean parent="Uif-ImageField" p:source="../images/document.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                              p:onClickScript="showLightboxComponent('documentLightbox@{#lineSuffix}');">
                            <property name="toolTip">
                                <bean parent="Uif-Tooltip" p:tooltipContent="Document: Click icon to view"/>
                            </property>
                        </bean>
                        <bean id="documentLightbox" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                            <property name="hidden" value="true"/>
                            <property name="items">
                                <list>
                                    <bean parent="Uif-Image" p:source="../images/sample-document.png"/>

                                </list>
                            </property>
                        </bean>

                        <bean parent="Uif-ImageField" p:source="../images/tag.png" p:style="cursor:pointer; float: right;" p:altText="" p:title=""
                              p:onClickScript="showLightboxComponent('tagLightbox@{#lineSuffix}');" p:render="@{#line.tags.size() > 0}">
                            <property name="toolTip">
                                <bean parent="Uif-Tooltip" p:tooltipContent="Tags: @{#line.tagList}"/>
                            </property>
                        </bean>
                        <bean id="tagLightbox" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="VERTICAL">
                            <property name="hidden" value="true"/>
                            <property name="items">
                                <list>
                                    <bean parent="Uif-HeaderTwo" p:headerText="Account and Transaction Tags"/>
                                    <ref bean="tagGroup"/>

                                </list>
                            </property>
                        </bean>



                    </list>
                    </property>
                </bean>
                <bean parent="Uif-InputField" p:propertyName="chargeAmount" p:label="Charges" p:style="text-align: right; width: 10%;"/>
                <bean parent="Uif-InputField" p:propertyName="paymentAmount" p:label="Payments" p:style="text-align: right; width: 10%;"/>
                <bean parent="Uif-InputField" p:propertyName="defermentAmount" p:label="Deferments" p:style="text-align: right; width: 10%;"/>
                <bean parent="Uif-InputField" p:propertyName="allocatedLockedAllocated" p:label="Allocated" p:style="text-align: right; width: 10%;"/>
                <bean parent="Uif-InputField" p:propertyName="unallocatedAmount" p:label="Unallocated" p:style="text-align: right; width: 10%;"/>
            </list>
        </property>
    </bean>

    <bean id="runningAllocationList" parent="Uif-TableSubCollection-WithinSection" p:layoutManager.numberOfColumns="3">
        <property name="headerText" value="Allocations" />
        <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.AllocationModel" />
        <property name="propertyName" value="allocations" />
        <property name="layoutManager.richTable.render" value="true" />
        <property name="layoutManager.generateAutoSequence" value="true"/>
        <property name="layoutManager.renderSequenceField" value="false"/>
        <property name="style" value="width: 30%;"/>
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <entry key="bPaginate" value="false"/>
                <entry key="bInfo" value="false"/>
                <entry key="bFilter" value="false"/>
            </map>
        </property>
        <!--
        <property name="layoutManager.columnCalculations">
            <list>
                <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="allocation.amount" p:showTotal="true"/>
            </list>
        </property>
        -->
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="allocatedTransaction.transactionType.description" p:label="Description" p:style="width: 50%"/>
                <bean parent="Uif-InputField" p:propertyName="allocation.amount" p:label="Amount" p:style="text-align: right; width: 30%"/>
                <bean parent="Uif-MessageField" p:messageText="&lt;img src='../images/@{#line.allocation.isLocked() ? 'locked' : 'unlocked'}.png' alt='@{#line.allocation.isLocked() ? 'Locked' : 'Unlocked'}'&gt;" p:label="Locked" p:style="width: 20%">
                    <property name="toolTip">
                        <bean parent="Uif-Tooltip" p:tooltipContent="Transaction is @{#line.allocation.isLocked() ? 'locked' : 'unlocked'}"/>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="transactionDetail" parent="Uif-VerticalBoxSection">
        <property name="items">
            <list>
                <bean parent="Uif-HorizontalBoxGroup">
                    <property name="items">
                        <list>

                            <bean parent="Uif-Disclosure-GridSection" p:style="width: 40%;"><property name="items"><list>
                                <bean parent="Uif-InputField" p:propertyName="transactionDisplayType" p:label="Transaction Type"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.status" p:label="Status"/>
                                <bean parent="Uif-InputField" p:propertyName="idString" p:label="Transaction ID"/>

                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.creationDate" p:label="Creation Date"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.effectiveDate" p:label="Effective Date"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.originationDate" p:label="Origination Date"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.recognitionDate" p:label="Recognition Date"/>
                                <bean parent="Uif-InputField" p:propertyName="clearDate" p:label="Clear Date" p:render="@{#line.isPayment()}"/>

                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.amount" p:label="Amount"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.currency.code" p:label="Currency"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.nativeAmount" p:label="Native Amount"/>
                            </list></property></bean>
                            <bean parent="Uif-Disclosure-GridSection" p:style="width: 55%;"><property name="items"><list>
                                <bean parent="Uif-InputField" p:propertyName="glEntryGenerated" p:label="General Ledger Entry"/>
                                <bean parent="Uif-InputField" p:propertyName="internal" p:label="Internal Transaction"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.allocatedAmount" p:label="Allocated Amount"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.lockedAllocatedAmount" p:label="Locked Allocated"/>

                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.transactionType.description" p:label="Description"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.rollup.description" p:label="Roll-up"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.generalLedgerType.description" p:label="General Ledger Type"/>
                                <bean parent="Uif-InputField" p:propertyName="glOverridden" p:label="Override GL Codes"/>
                                <bean parent="Uif-InputField" p:propertyName="parentTransaction.transactionType.id.id" p:label="@{#line.transactionDisplayType} Type"/>
                            </list></property></bean>
                        </list>
                    </property>
                </bean>
                <ref bean="tagGroup"/>
                <bean parent="Uif-Disclosure-VerticalBoxSection" >
                    <property name="headerText" value="Memos"/>
                    <!-- disclosure fixed in Rice 2.2.1, disabling for now: https://jira.kuali.org/browse/KULRICE-8938 -->
                    <!--<property name="disclosure.defaultOpen" value="false" />-->
                    <property name="items">
                        <list>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Disclosure-VerticalBoxSection" >
                    <property name="headerText" value="Flags"/>
                    <!--<property name="disclosure.defaultOpen" value="false" />-->
                    <property name="items">
                        <list>
                            <ref bean="flagLightboxTable"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Disclosure-VerticalBoxSection" >
                    <property name="headerText" value="Alerts"/>
                    <!--<property name="disclosure.defaultOpen" value="false" />-->
                    <property name="items">
                        <list>
                            <ref bean="alertLightboxTable"/>
                        </list>
                    </property>
                </bean>


            </list>
        </property>
    </bean>


</beans>